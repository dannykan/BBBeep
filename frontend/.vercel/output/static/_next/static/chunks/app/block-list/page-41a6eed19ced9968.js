(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{4203:function(e,s,t){Promise.resolve().then(t.bind(t,5606))},5606:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var r=t(7821),n=t(8078),d=t(8504),a=t(3923),i=t(8006),c=t(3842),l=t(641),o=t(8046),x=t(3116);let m=(0,t(6576).Z)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var u=t(4680),h=t(3295),j=t(3759);let b=n.memo(()=>{let e=(0,d.useRouter)(),{user:s,refreshUser:t}=(0,a.q)(),[b,f]=n.useState(!1),[v,N]=n.useState(!1),[g,p]=n.useState(null),[k,w]=n.useState(!1);(0,n.useEffect)(()=>{s&&t()},[s,t]);let y=async()=>{if(g){w(!0);try{await h.g8.unblockUser(g.id),await t(),f(!1),p(null),u.Am.success("已解除封鎖")}catch(t){var e,s;u.Am.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"解除封鎖失敗")}finally{w(!1)}}},Z=async()=>{if(g){w(!0);try{await h.g8.unrejectUser(g.id),await t(),N(!1),p(null),u.Am.success("已從拒收名單移除")}catch(t){var e,s;u.Am.error((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.message)||"移除失敗")}finally{w(!1)}}},C=e=>{p({...e,type:"blocked"}),f(!0)},W=e=>{p({...e,type:"rejected"}),N(!0)};if(!s)return(0,r.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-muted-foreground",children:"載入中..."})});let z=s.blockedUsers||[],_=s.rejectedUsers||[];return(0,r.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,r.jsx)("div",{className:"bg-card border-b border-border",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto px-6 py-4 flex items-center justify-between relative",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/settings"),className:"flex items-center gap-2 p-1 hover:bg-muted/50 rounded transition-colors",children:[(0,r.jsx)(l.Z,{className:"h-5 w-5 text-muted-foreground",strokeWidth:2}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"返回"})]}),(0,r.jsx)("h1",{className:"text-base text-foreground absolute left-1/2 -translate-x-1/2",children:"封鎖 / 拒收"}),(0,r.jsx)("div",{className:"w-[80px]"})]})}),(0,r.jsxs)("div",{className:"max-w-md mx-auto p-6 space-y-6",children:[(0,r.jsx)(i.Zb,{className:"p-4 bg-muted/30 border-border shadow-none",children:(0,r.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground leading-relaxed",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:"封鎖："}),"完全隔絕往來，您無法發送也無法接收該用戶的提醒"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:"拒收："}),"只是不接收該用戶的提醒，但您仍可向對方發送提醒"]}),(0,r.jsx)("p",{className:"mt-3 pt-3 border-t border-border",children:"\uD83D\uDCA1 只能從收件夾的訊息中封鎖/拒收發送者"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4",strokeWidth:1.5}),"封鎖名單"]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground tabular-nums",children:[z.length," 位用戶"]})]}),z.length>0?(0,r.jsx)(i.Zb,{className:"divide-y divide-border bg-card border-border shadow-none overflow-hidden",children:z.map(e=>{var s;return(0,r.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-foreground",children:(null===(s=e.blocked)||void 0===s?void 0:s.nickname)||"匿名用戶"}),(0,r.jsxs)("button",{onClick:()=>C({id:e.blocked.id,nickname:e.blocked.nickname}),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-destructive transition-colors",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4",strokeWidth:2}),(0,r.jsx)("span",{children:"解除"})]})]},e.id)})}):(0,r.jsxs)(i.Zb,{className:"p-8 text-center bg-card border-border shadow-none",children:[(0,r.jsx)(o.Z,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2",strokeWidth:1.5}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"尚無封鎖用戶"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"從收件夾的訊息中可以封鎖發送者"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,r.jsx)(m,{className:"h-4 w-4",strokeWidth:1.5}),"拒收名單"]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground tabular-nums",children:[_.length," 位用戶"]})]}),_.length>0?(0,r.jsx)(i.Zb,{className:"divide-y divide-border bg-card border-border shadow-none overflow-hidden",children:_.map(e=>{var s;return(0,r.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm text-foreground",children:(null===(s=e.rejected)||void 0===s?void 0:s.nickname)||"匿名用戶"}),(0,r.jsxs)("button",{onClick:()=>W({id:e.rejected.id,nickname:e.rejected.nickname}),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-destructive transition-colors",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4",strokeWidth:2}),(0,r.jsx)("span",{children:"移除"})]})]},e.id)})}):(0,r.jsxs)(i.Zb,{className:"p-8 text-center bg-card border-border shadow-none",children:[(0,r.jsx)(m,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2",strokeWidth:1.5}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"尚無拒收用戶"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"從收件夾的訊息中可以拒收發送者"})]})]})]}),(0,r.jsx)(j.Vq,{open:b,onOpenChange:f,children:(0,r.jsxs)(j.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(j.fK,{children:[(0,r.jsx)(j.$N,{children:"解除封鎖"}),(0,r.jsxs)(j.Be,{children:["確定要解除封鎖「",(null==g?void 0:g.nickname)||"匿名用戶","」嗎？"]})]}),(0,r.jsxs)(j.cN,{children:[(0,r.jsx)(c.z,{variant:"outline",onClick:()=>f(!1),children:"取消"}),(0,r.jsx)(c.z,{onClick:y,disabled:k,children:k?"處理中...":"確認解除"})]})]})}),(0,r.jsx)(j.Vq,{open:v,onOpenChange:N,children:(0,r.jsxs)(j.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(j.fK,{children:[(0,r.jsx)(j.$N,{children:"移除拒收"}),(0,r.jsxs)(j.Be,{children:["確定要從拒收名單移除「",(null==g?void 0:g.nickname)||"匿名用戶","」嗎？"]})]}),(0,r.jsxs)(j.cN,{children:[(0,r.jsx)(c.z,{variant:"outline",onClick:()=>N(!1),children:"取消"}),(0,r.jsx)(c.z,{onClick:Z,disabled:k,children:k?"處理中...":"確認移除"})]})]})})]})});b.displayName="BlockListPage";var f=b}},function(e){e.O(0,[163,900,725,142,115,253,744],function(){return e(e.s=4203)}),_N_E=e.O()}]);